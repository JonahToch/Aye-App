<div style="display: flex; justify-content: center">
  <mat-card appearance="outlined" style="width: 100%; max-width: 1000px;">
        <div class="row" style="width: 98%; margin-left: 1%; margin-right: 1%;">
          <div class="col-md-12 col-xs-12">
            <div class="tableHeader">Poop Diaries
              <br>
              <span style="margin-top: 155px">
            Leaderboard
          </span>
            </div>
          </div>
        </div>
    <ng-container *ngIf="dataSource.data.length > 0">
<!--TODO decide on whether ot use elevation-->
      <!--      <div class="mat-elevation-z8"-->
      <div class="mat-elevation-z8"
           style=" overflow: auto; width: 98%; margin-left: 1%; margin-right: 1%;"
           tabindex="0">
        <ng-container>
          <table [dataSource]="dataSource" mat-table matSort matSortStart="desc" matSortDisableClear>
<!--            (matSortChange)="sortSoftballData($event)">-->



            <ng-container matColumnDef="user" style="justify-content: center" sticky>

              <th mat-header-cell *matHeaderCellDef class="stat-header">
                <b>User</b>
                <div class="stat-arrow">
                  <span mat-sort-header></span>
                </div>
              </th>

              <td *matCellDef="let element; let i = index;"
                  mat-cell>
                {{element.user.toLowerCase()}}
              </td>
            </ng-container>

            <ng-container matColumnDef="ayeScore" style="justify-content: center">

              <th mat-header-cell *matHeaderCellDef class="stat-header">
                <b>Aye Score</b>
                <div class="stat-arrow">
                  <span mat-sort-header></span>
                </div>
              </th>

              <td *matCellDef="let element; let i = index;"
                  mat-cell>
                {{element.ayeScore}}
              </td>
            </ng-container>

            <ng-container matColumnDef="uniqueStates" style="justify-content: center">

              <th mat-header-cell *matHeaderCellDef class="stat-header">
                <b>Unique States</b>
                <div class="stat-arrow">
                  <span mat-sort-header></span>
                </div>
              </th>

              <td *matCellDef="let element; let i = index;"
                  mat-cell>
                {{element.states.length}}
              </td>
            </ng-container>

            <ng-container matColumnDef="uniqueCities" style="justify-content: center">

              <th mat-header-cell *matHeaderCellDef class="stat-header">
                <b>Unique Cities</b>
                <div class="stat-arrow">
                  <span mat-sort-header></span>
                </div>
              </th>

              <td *matCellDef="let element; let i = index;"
                  mat-cell>
                {{element.cities.length}}
              </td>
            </ng-container>



            <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
            <tr *matRowDef="let row; columns: displayedColumns;" mat-row></tr>
          </table>
          <mat-paginator [pageSizeOptions]="[10, 20, 30]" [length]="dataSource.data.length"
                         [hidePageSize]="true"
                         aria-label="Select page of work order"
                         showFirstLastButtons>
          </mat-paginator>
          <!--Refer to this package for how the data is output as csv: https://github.com/scttcper/ngx-csv -->
          <ng-container *ngIf="dataSource.data.length >= 1">
            <a [data]="dataSource.data" filename="poop-diaries-leaderboard-{{getCurrDate()}}.csv" csvLink>
              <button mat-raised-button
                      style="width: 40%; max-width: 375px; background-color: #fad900; color: black; margin-left: 10px; margin-bottom: 10px;">
                <b>Download Data</b>
              </button>
            </a>
          </ng-container>


        </ng-container>

      </div>
    </ng-container>


<!-- Old code    -->
<!--    <div class="row">-->
<!--      <div class="col-md-12 col-xs-12">-->
<!--        <div class="tableHeader">Poop Diaries-->
<!--          <br>-->
<!--          <span style="margin-top: 155px">-->
<!--        Leaderboard-->
<!--      </span>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="row">-->
<!--      <div class="col-md-12 col-xs-12">-->
<!--        <table class="table-bordered">-->
<!--          <thead>-->
<!--          <tr class="camper">-->
<!--            <th class="number">User</th>-->
<!--            <th>Unique Cities</th>-->
<!--            <th>Unique States</th>-->
<!--            <th class="number">-->
<!--              Aye Score-->
<!--              <div></div>-->
<!--            </th>-->
<!--          </tr>-->
<!--          </thead>-->
<!--          <tbody>-->
<!--          <ng-container *ngIf="this.sortedMap">-->
<!--            <ng-container *ngFor="let d of this.sortedMap; let i = index;">-->
<!--              <tr>-->
<!--                <div [class]="getBorder(i)" style="display: flex;">-->
<!--                  <ng-container *ngIf="i === 0;">-->
<!--                    <span style="font-size: 44px; float: left">-->
<!--                        ðŸ¥‡-->
<!--                      </span>-->
<!--                    <td style="font-weight: 500; padding-left: 0;">-->
<!--                      <i>{{d[0][0] + d[0].slice(1).toLowerCase()}}</i>-->
<!--                    </td>-->
<!--                  </ng-container>-->
<!--                  <ng-container *ngIf="i === 1;">-->
<!--                    <span style="font-size: 44px; float: left;">-->
<!--                        ðŸ¥ˆ-->
<!--                      </span>-->
<!--                    <td style="font-weight: 500;"><i>{{d[0][0] + d[0].slice(1).toLowerCase()}}</i></td>-->
<!--                  </ng-container>-->
<!--                  <ng-container *ngIf="i === 2;">-->
<!--                       <span style="font-size: 44px;">-->
<!--                        ðŸ¥‰-->
<!--                      </span>-->
<!--                    <td style="font-weight: 500;"><i>{{d[0][0] + d[0].slice(1).toLowerCase()}}</i></td>-->
<!--                  </ng-container>-->
<!--                  <ng-container *ngIf="i > 2;">-->
<!--                    <td style="font-weight: 500;"><i>{{d[0][0] + d[0].slice(1).toLowerCase()}}</i></td>-->
<!--                  </ng-container>-->
<!--                </div>-->
<!--                <td class="number">{{d[1].cities.length}}</td>-->
<!--                <td class="number">{{d[1].states.length}}</td>-->
<!--                <td class="number" style="color: #3366ff; font-weight: 500;">{{d[1].ayeScore}}</td>-->
<!--              </tr>-->
<!--            </ng-container>-->
<!--          </ng-container>-->
<!--          </tbody>-->
<!--        </table>-->
<!--      </div>-->
<!--    </div>-->
    <br>
  </mat-card>
  <br>
</div>

